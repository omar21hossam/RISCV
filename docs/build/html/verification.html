<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Verification &mdash; CORE-V CV32E40P User Manual  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=9f5a17ff" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="CORE-V Hardware Loop feature" href="corev_hw_loop.html" />
    <link rel="prev" title="Floating Point Unit (FPU)" href="fpu.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #DDDDDD" >

          
          
          <a href="index.html" class="icon icon-home">
            CORE-V CV32E40P User Manual
              <img src="_static/openhw-landscape.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="preface.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="integration.html">Core Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="fpu.html">Floating Point Unit (FPU)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Verification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#v1-0-0-verification">v1.0.0 verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v2-0-0-verification">v2.0.0 verification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#formal-verification">Formal verification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simulation-verification">Simulation verification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reports">Reports</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tracer">Tracer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#output-file">Output file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#trace-output-format">Trace output format</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="corev_hw_loop.html">CORE-V Hardware Loop feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="instruction_set_extensions.html">CORE-V Instruction Set Custom Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="perf_counters.html">Performance Counters</a></li>
<li class="toctree-l1"><a class="reference internal" href="control_status_registers.html">Control and Status Registers</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions_interrupts.html">Exceptions and Interrupts</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debug &amp; Trigger</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">Pipeline Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="instruction_fetch.html">Instruction Fetch</a></li>
<li class="toctree-l1"><a class="reference internal" href="load_store_unit.html">Load-Store-Unit (LSU)</a></li>
<li class="toctree-l1"><a class="reference internal" href="register_file.html">Register File</a></li>
<li class="toctree-l1"><a class="reference internal" href="sleep.html">Sleep Unit</a></li>
<li class="toctree-l1"><a class="reference internal" href="core_versions.html">Core Versions and RTL Freeze Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #DDDDDD" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CORE-V CV32E40P User Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Verification</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/verification.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="verification">
<span id="id1"></span><h1>Verification<a class="headerlink" href="#verification" title="Link to this heading"></a></h1>
<p>The verification environment (testbenches, testcases, etc.) for the CV32E40P
core can be found at  <a class="reference external" href="https://github.com/openhwgroup/core-v-verif">core-v-verif</a>.
It is recommended to start by reviewing the
<a class="reference external" href="https://docs.openhwgroup.org/projects/core-v-verif/en/latest">CORE-V Verification Strategy</a>.</p>
<section id="v1-0-0-verification">
<h2>v1.0.0 verification<a class="headerlink" href="#v1-0-0-verification" title="Link to this heading"></a></h2>
<p>In early 2021 the CV32E40P achieved Functional RTL Freeze (released with cv32e40p_v1.0.0 version), meaning that is has been fully verified as per its
<a class="reference external" href="https://github.com/openhwgroup/core-v-verif/tree/cv32e40p/dev/cv32e40p/docs/VerifPlans/README.md">Verification Plan</a>.
Final functional, code and test coverage reports can be found <a class="reference external" href="https://github.com/openhwgroup/core-v-verif/blob/master/docs/Reports/cv32e40p/index.html">here</a>.</p>
<p>The unofficial start date for the CV32E40P verification effort is 2020-02-27,
which is the date the core-v-verif environment “went live”.  Between then and
RTL Freeze, a total of 47 RTL issues and 38 User Manual issues were identified
and resolved <a class="footnote-reference brackets" href="#id3" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<p>A breakdown of the RTL issues is as follows:</p>
<table class="no-scrollbar-table docutils align-default" id="how-rtl-issues-were-found-in-v1-0-0">
<caption><span class="caption-number">Table 8 </span><span class="caption-text">How RTL Issues Were Found in v1.0.0</span><a class="headerlink" href="#how-rtl-issues-were-found-in-v1-0-0" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 27.0%" />
<col style="width: 9.0%" />
<col style="width: 64.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>“Found By”</strong></p></th>
<th class="head"><p><strong>Count</strong></p></th>
<th class="head"><p><strong>Note</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Simulation</p></td>
<td><p>18</p></td>
<td><p>See classification below</p></td>
</tr>
<tr class="row-odd"><td><p>Inspection</p></td>
<td><p>13</p></td>
<td><p>Human review of the RTL</p></td>
</tr>
<tr class="row-even"><td><p>Formal Verification</p></td>
<td><p>13</p></td>
<td><p>This includes both Designer and Verifier use of FV</p></td>
</tr>
<tr class="row-odd"><td><p>Lint</p></td>
<td><p>2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Unknown</p></td>
<td><p>1</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>A classification of the simulation issues by method used to identify them is informative:</p>
<table class="no-scrollbar-table docutils align-default" id="breakdown-of-issues-found-by-simulation-in-v1-0-0">
<caption><span class="caption-number">Table 9 </span><span class="caption-text">Breakdown of Issues found by Simulation in v1.0.0</span><a class="headerlink" href="#breakdown-of-issues-found-by-simulation-in-v1-0-0" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 27.0%" />
<col style="width: 9.0%" />
<col style="width: 64.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Simulation Method</strong></p></th>
<th class="head"><p><strong>Count</strong></p></th>
<th class="head"><p><strong>Note</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Directed, self-checking test</p></td>
<td><p>10</p></td>
<td><p>Many test supplied by Design team and a couple from the Open Source Community at large</p></td>
</tr>
<tr class="row-odd"><td><p>Step &amp; Compare</p></td>
<td><p>6</p></td>
<td><p>Issues directly attributed to S&amp;C against ISS</p></td>
</tr>
<tr class="row-even"><td><p>Constrained-Random</p></td>
<td><p>2</p></td>
<td><p>Test generated by corev-dv (extension of riscv-dv)</p></td>
</tr>
</tbody>
</table>
<p>A classification of the issues themselves:</p>
<table class="no-scrollbar-table docutils align-default" id="issue-classification-in-v1-0-0">
<caption><span class="caption-number">Table 10 </span><span class="caption-text">Issue Classification in v1.0.0</span><a class="headerlink" href="#issue-classification-in-v1-0-0" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 27.0%" />
<col style="width: 9.0%" />
<col style="width: 64.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Issue Type</strong></p></th>
<th class="head"><p><strong>Count</strong></p></th>
<th class="head"><p><strong>Note</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>RTL Functional</p></td>
<td><p>40</p></td>
<td><p>A bug!</p></td>
</tr>
<tr class="row-odd"><td><p>RTL coding style</p></td>
<td><p>4</p></td>
<td><p>Linter issues, removing TODOs, removing `ifdefs, etc.</p></td>
</tr>
<tr class="row-even"><td><p>Non-RTL functional</p></td>
<td><p>1</p></td>
<td><p>Issue related to behavioral tracer (not part of the core)</p></td>
</tr>
<tr class="row-odd"><td><p>Unreproducible</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Invalid</p></td>
<td><p>1</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>Additional details are available as part of the <a class="reference external" href="https://github.com/openhwgroup/programs/tree/master/milestones/CV32E40P/RTL_Freeze_v1.0.0">CV32E40P v1.0.0 Report</a>.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">1</a><span class="fn-bracket">]</span></span>
<p>It is a testament on the quality of the work done by the PULP platform team
that it took a team of professonal verification engineers more than 9 months
to find all these issues.</p>
</aside>
</aside>
</section>
<section id="v2-0-0-verification">
<h2>v2.0.0 verification<a class="headerlink" href="#v2-0-0-verification" title="Link to this heading"></a></h2>
<p>The table below lists the 9 configurations with <code class="docutils literal notranslate"><span class="pre">cv32e40p_top</span></code> parameters values verified in the scope of CV32E40Pv2 project using both Formal-based and Simulation-based methodologies.</p>
<table class="no-scrollbar-table docutils align-center" id="verified-configurations">
<caption><span class="caption-number">Table 11 </span><span class="caption-text">Verified configurations</span><a class="headerlink" href="#verified-configurations" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Top Parameters</strong></p></th>
<th class="head" colspan="9"><p><strong>Verified Configurations</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>COREV_PULP</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>COREV_CLUSTER</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>FPU</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>ZFINX</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>FPU_ADDMUL_LAT</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>FPU_OTHERS_LAT</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>2</p></td>
</tr>
</tbody>
</table>
<p>A total of resp. 30 and xx RTL issues were identified by resp. Formal Verification and Simulation methodologies, all have been resolved.</p>
<p>A breakdown of the RTL issues is as follows:</p>
<table class="no-scrollbar-table docutils align-default" id="how-rtl-issues-were-found-in-v2-0-0">
<caption><span class="caption-number">Table 12 </span><span class="caption-text">How RTL Issues Were Found in v2.0.0</span><a class="headerlink" href="#how-rtl-issues-were-found-in-v2-0-0" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 27.0%" />
<col style="width: 9.0%" />
<col style="width: 64.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>“Found By”</strong></p></th>
<th class="head"><p><strong>Count</strong></p></th>
<th class="head"><p><strong>Note</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Formal Verification</p></td>
<td><p>30</p></td>
<td><p>All related to features enabled by <code class="docutils literal notranslate"><span class="pre">COREV_PULP</span></code> or <code class="docutils literal notranslate"><span class="pre">FPU</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>Simulation</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Lint</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>A classification of the Formal Verification issues by type and their description are listed in the two following tables:</p>
<table class="no-scrollbar-table docutils align-default" id="breakdown-of-issues-found-by-formal-verification-in-v2-0-0">
<caption><span class="caption-number">Table 13 </span><span class="caption-text">Breakdown of Issues found by Formal Verification in v2.0.0</span><a class="headerlink" href="#breakdown-of-issues-found-by-formal-verification-in-v2-0-0" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 27.0%" />
<col style="width: 9.0%" />
<col style="width: 64.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Count</strong></p></th>
<th class="head"><p><strong>Note</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>User Manual</p></td>
<td><p>12</p></td>
<td><p>Instructions description leading to mis-interpretation</p></td>
</tr>
<tr class="row-odd"><td><p>RTL bugs</p></td>
<td><p>18</p></td>
<td><p>See classification below</p></td>
</tr>
</tbody>
</table>
<table class="no-scrollbar-table docutils align-default" id="formal-verification-issues-classification-in-v2-0-0">
<caption><span class="caption-number">Table 14 </span><span class="caption-text">Formal Verification Issues Classification in v2.0.0</span><a class="headerlink" href="#formal-verification-issues-classification-in-v2-0-0" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 27.0%" />
<col style="width: 9.0%" />
<col style="width: 64.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Issue Type</strong></p></th>
<th class="head"><p><strong>Count</strong></p></th>
<th class="head"><p><strong>Note</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Illegal instructions exception</p></td>
<td><p>5</p></td>
<td><p>F and XPULP instructions corner cases or CSR accesses not flagged as Illegal
instructions exception.</p></td>
</tr>
<tr class="row-odd"><td><p>Multi-cycle F instructions</p></td>
<td><p>8</p></td>
<td><p>FDIV, FSQRT or respective F instructions (when FPU_ADDMUL_LAT or FPU_OTHERS_LAT = 2)
are executed in the background and the pipeline can continue to execute other
instructions as long as there is no Read-After-Write or Write-After-Write dependency.
When the multi-cycle F instructions are finally writing back their result in the
Register File, this register update can corrupt on-going instructions behaviour or
result. This is the case for Misaligned Loads, Post-Incremented Load/Stores, MULH,
JALR or cv.add*NR/cv.sub*NR.</p></td>
</tr>
<tr class="row-even"><td><p>F instructions result or flags</p></td>
<td><p>5</p></td>
<td><p>F result or flags computations is incorrect with respect to IEEE 754-2008 standard.</p></td>
</tr>
</tbody>
</table>
<p>A classification of the simulation issues by method used to identify them is informative:</p>
<table class="no-scrollbar-table docutils align-default" id="breakdown-of-issues-found-by-simulation-in-v2-0-0">
<caption><span class="caption-number">Table 15 </span><span class="caption-text">Breakdown of Issues found by Simulation in v2.0.0</span><a class="headerlink" href="#breakdown-of-issues-found-by-simulation-in-v2-0-0" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 27.0%" />
<col style="width: 9.0%" />
<col style="width: 64.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Simulation Method</strong></p></th>
<th class="head"><p><strong>Count</strong></p></th>
<th class="head"><p><strong>Note</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Directed, self-checking test</p></td>
<td></td>
<td><p>Many test supplied by Design team and a couple from the Open Source Community at large</p></td>
</tr>
<tr class="row-odd"><td><p>RVFI/RVVI</p></td>
<td></td>
<td><p>Issues directly attributed to comparison against Reference Model</p></td>
</tr>
<tr class="row-even"><td><p>Constrained-Random</p></td>
<td></td>
<td><p>Test generated by corev-dv (extension of riscv-dv)</p></td>
</tr>
</tbody>
</table>
<p>A classification of the Simulation issues themselves:</p>
<table class="no-scrollbar-table docutils align-default" id="simulation-issue-classification-in-v2-0-0">
<caption><span class="caption-number">Table 16 </span><span class="caption-text">Simulation Issue Classification in v2.0.0</span><a class="headerlink" href="#simulation-issue-classification-in-v2-0-0" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 27.0%" />
<col style="width: 9.0%" />
<col style="width: 64.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Issue Type</strong></p></th>
<th class="head"><p><strong>Count</strong></p></th>
<th class="head"><p><strong>Note</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>RTL Functional bug</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<section id="formal-verification">
<h3>Formal verification<a class="headerlink" href="#formal-verification" title="Link to this heading"></a></h3>
<p>To accelerate the verification of more than 300 Xpulp instructions, Formal Verification methodology has been used with Siemens EDA Onespin tools and its RISC-V ISA Processor Verification app.</p>
<p>The Xpulp instructions pseudo-code description using Sail language have been added to the RISC-V ISA app to successfully formally verify all the CV32E40P instructions, including the previously verified standard IMC together with the new F, Zfinx and Xpulp extensions and all additional custom CSRs.</p>
<p>Example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;name&quot;: &quot;CV.SDOTUP.B&quot;,
  &quot;disassembly&quot;: &quot;cv.sdotup.b {rd},{rs1},{rs2}&quot;,
  &quot;decoding&quot;: &quot;1001100 rs2 rs1 001 rd/rs3 1111011&quot;,
  &quot;restrictions&quot;: &quot;&quot;,
  &quot;execution&quot;: &quot;X(rd) = X(rs3) + EXTZ(mul(X(rs1)[7..0],X(rs2)[7..0])) +
                                 EXTZ(mul(X(rs1)[15..8],X(rs2)[15..8])) +
                                 EXTZ(mul(X(rs1)[23..16],X(rs2)[23..16])) +
                                 EXTZ(mul(X(rs1)[31..24],X(rs2)[31..24]))&quot;
},
</pre></div>
</div>
<p>Those SAIL instructions description are then used to automatically generate more than 430 assertions and 29 CSRs descriptions.
Those assertions have been applied on the 9 different configurations listed in <a class="reference internal" href="#verified-configurations"><span class="std std-ref">Verified configurations</span></a> table.</p>
<p>RTL code coverage is generated using Siemens EDA Onespin Quantify tool which uses RTL mutation to check assertions quality and can produce standard UCDB database that can be merged with simulation one afterwards.</p>
<p>WIP…</p>
</section>
<section id="simulation-verification">
<h3>Simulation verification<a class="headerlink" href="#simulation-verification" title="Link to this heading"></a></h3>
<p>core-v-verif verification environment for v1.0.0 was using a <em>step&amp;compare</em> methodology with an instruction set simulator (ISS) from Imperas Software as the reference model.
This strategy was successful, but inefficient because the <em>step&amp;compare</em> logic in the testbench must compensate for the cycle-time effects of events that are asynchronous to the instruction stream such as interrupts, debug resets plus bus errors and random delays on instruction fetch and load/store memory buses.
For verification of v2.0.0 release of the CV32E40P core, the step-and-compare and the ISS have been replaced by a true reference model (RM) called ImperasDV. In addition, the Imperas Reference Model has been extended to support the v2 Xpulp instructions specification.</p>
<p>Another innovation for v2.0.0 was the adoption of a standardized tracer interface to the DUT and RM, based on the open-source RISC-V Verification Interface (RVVI). The use of well documented, standardized interfaces greatly simplifies the integration of the DUT with the RM.</p>
<p>Additionaly to V1 Verification plans, <a class="reference external" href="https://github.com/openhwgroup/core-v-verif/tree/cv32e40p/dev/cv32e40p/docs/VerifPlans/README.md">Verification Plan</a> contains a <a class="reference external" href="https://github.com/openhwgroup/core-v-verif/blob/cv32e40p/dev/cv32e40p/docs/VerifPlans/README.md#cv32e40p-v2-verification-plans">new section</a> related to F and XPULP verification.</p>
<p>WIP…</p>
</section>
<section id="reports">
<h3>Reports<a class="headerlink" href="#reports" title="Link to this heading"></a></h3>
<p>WIP…</p>
</section>
</section>
<section id="tracer">
<h2>Tracer<a class="headerlink" href="#tracer" title="Link to this heading"></a></h2>
<p>The module <code class="docutils literal notranslate"><span class="pre">cv32e40p_rvfi_trace</span></code> can be used to create a log of the executed instructions.
It is a behavioral, non-synthesizable, module instantiated in the example testbench that is provided for
the <code class="docutils literal notranslate"><span class="pre">cv32e40p_top</span></code>. It can be enabled during simulation by defining <strong>CV32E40P_RVFI_TRACE_EXECUTION</strong>.</p>
<section id="output-file">
<h3>Output file<a class="headerlink" href="#output-file" title="Link to this heading"></a></h3>
<p>All traced instructions are written to a log file.
The log file is named <code class="docutils literal notranslate"><span class="pre">trace_core_&lt;HARTID&gt;.log</span></code>, with <code class="docutils literal notranslate"><span class="pre">&lt;HARTID&gt;</span></code> being the 32 digit hart ID of the core being traced.</p>
</section>
<section id="trace-output-format">
<h3>Trace output format<a class="headerlink" href="#trace-output-format" title="Link to this heading"></a></h3>
<p>The trace output is in tab-separated columns.</p>
<ol class="arabic simple">
<li><p><strong>Time</strong>: The current simulation time.</p></li>
<li><p><strong>Cycle</strong>: The number of cycles since the last reset.</p></li>
<li><p><strong>PC</strong>: The program counter</p></li>
<li><p><strong>Instr</strong>: The executed instruction (base 16).
32 bit wide instructions (8 hex digits) are uncompressed instructions, 16 bit wide instructions (4 hex digits) are compressed instructions.</p></li>
<li><p><strong>Decoded instruction</strong>: The decoded (disassembled) instruction in a format equal to what objdump produces when calling it like <code class="docutils literal notranslate"><span class="pre">objdump</span> <span class="pre">-Mnumeric</span> <span class="pre">-Mno-aliases</span> <span class="pre">-D</span></code>.
- Unsigned numbers are given in hex (prefixed with <code class="docutils literal notranslate"><span class="pre">0x</span></code>), signed numbers are given as decimal numbers.
- Numeric register names are used (e.g. <code class="docutils literal notranslate"><span class="pre">x1</span></code>).
- Symbolic CSR names are used.
- Jump/branch targets are given as absolute address if possible (PC + immediate).</p></li>
<li><p><strong>Register and memory contents</strong>: For all accessed registers, the value before and after the instruction execution is given. Writes to registers are indicated as <code class="docutils literal notranslate"><span class="pre">registername=value</span></code>, reads as <code class="docutils literal notranslate"><span class="pre">registername:value</span></code>. For memory accesses, the physical address (PA), the loaded and stored data are given.</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Time Cycle PC       Instr    Decoded instruction Register and memory contents
 130    61 00000150 4481     c.li    x9,0        x9=0x00000000
 132    62 00000152 00008437 lui     x8,0x8      x8=0x00008000
 134    63 00000156 fff40413 addi    x8,x8,-1    x8=0x00007fff  x8:0x00008000
 136    64 0000015a 8c65     c.and   x8,x9       x8=0x00000000  x8:0x00007fff  x9:0x00000000
 142    67 0000015c c622     c.swsp  x8,12(x2)   x2:0x00002000  x8:0x00000000 PA:0x0000200c
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="fpu.html" class="btn btn-neutral float-left" title="Floating Point Unit (FPU)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="corev_hw_loop.html" class="btn btn-neutral float-right" title="CORE-V Hardware Loop feature" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, OpenHW Group.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>